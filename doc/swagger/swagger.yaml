swagger: '2.0'
info:
  title: argo web api
  description: argo web api
  version: 1.0.0
host: localhost
schemes:
  - https
basePath: /api/v2
produces:
  - application/json
paths:

  /reports/{REPORT_ID}:
    get:
      summary: List a specific report
      operationId: reports.ListOne
      description: List one specific report designated by its unique id
      tags:
        - Reports
      produces:
        - "application/json"
      parameters:
        - name: "REPORT_ID"
          in: "path"
          description: "id of the report"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list with one report
          schema:
            $ref: '#/definitions/Report_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    put:
      summary: Update a report
      operationId: reports.Update
      description: update information on a specific report definition
      tags:
        - Reports
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "REPORT_ID"
          in: "path"
          description: "id of the operations profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "report"
          in: "body"
          description: "Json description of report definition to be updated"
          required: true
          schema:
            $ref: '#/definitions/Report'
      responses:
        '201':
          description: Report definition updated
          schema:
            $ref: '#/definitions/Status'
        '400':
          description: Bad request due to malformed JSON in put body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    delete:
      summary: Delete a report
      operationId: reports.Delete
      description: Delete a specific report which is targeted by it's unique id
      tags:
        - Reports
      produces:
        - "application/json"
      parameters:
        - name: "REPORT_ID"
          in: "path"
          description: "id of the Report definition"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: Report definition Deleted
          schema:
            $ref: '#/definitions/Status'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
  /reports:
    get:
      summary: List all available reports
      operationId: reports.List
      description: Reports provide a collection
      tags:
        - Reports
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list of all available Reports
          schema:
            $ref: '#/definitions/Report_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    post:
      summary: Create a report definition
      operationId: reports.Create
      description: Create a new Report definition
      tags:
        - Reports
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "report"
          in: "body"
          description: "Json description of the report to be created"
          required: true
          schema:
            $ref: '#/definitions/Report'
      responses:
        '200':
          description: Report definition created
          schema:
            $ref: '#/definitions/Self_reference'
        '400':
          description: Bad request due to malformed JSON in post body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'

  /operations_profiles/{PROFILE_ID}:
    get:
      summary: List a specific operations profile
      operationId: operationsProfiles.ListOne
      description: List one specific operations profile targeted by it's unique id
      tags:
        - Operations Profiles
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the operations profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list with one operations profile
          schema:
            $ref: '#/definitions/Operations_profile_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    put:
      summary: Update an operations profile
      operationId: operationsProfiles.Update
      description: update information on a specific Operations Profile which is targeted by it's unique id
      tags:
        - Operations Profiles
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the operations profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "operations_profile"
          in: "body"
          description: "Json description of the operations profile to be updated"
          required: true
          schema:
            $ref: '#/definitions/Operations_profile'
      responses:
        '201':
          description: Operations profile Updated
          schema:
            $ref: '#/definitions/Status'
        '400':
          description: Bad request due to malformed JSON in put body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    delete:
      summary: Delete an operations profile
      operationId: operationsProfiles.Delete
      description: Delete a specific Operations Profile which is targeted by it's unique id
      tags:
        - Operations Profiles
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the operations profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: Operations profile Deleted
          schema:
            $ref: '#/definitions/Status'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
  /operations_profiles:
    get:
      summary: List all operations profiles
      operationId: operationsProfiles.List
      description: Operations Profiles provides a list of available monitoring states and logical operations defined on how to aggregate them
      tags:
        - Operations Profiles
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list of Operations profiles
          schema:
            $ref: '#/definitions/Operations_profile_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    post:
      summary: Create an Operations profile
      operationId: operationsProfiles.Create
      description: Create a new Operations Profile
      tags:
        - Operations Profiles
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "operations_profile"
          in: "body"
          description: "Json description of the operations profile to be created"
          required: true
          schema:
            $ref: '#/definitions/Operations_profile'
      responses:
        '200':
          description: Operations profile Created
          schema:
            $ref: '#/definitions/Self_reference'
        '400':
          description: Bad request due to malformed JSON in post body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'


  /aggregation_profiles/{PROFILE_ID}:
    get:
      summary: List a specific aggregation profile
      operationId: aggregationProfiles.ListOne
      description: List one specific aggregation profile targeted by it's unique id
      tags:
        - Aggregation Profiles
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the aggregation profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list with one aggregation profile
          schema:
            $ref: '#/definitions/Aggregation_profile_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    put:
      summary: Update an aggregation profile
      operationId: aggregationProfiles.Update
      description: update information on a specific aggregation Profile which is targeted by it's unique id
      tags:
        - Aggregation Profiles
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the aggregation profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "aggregation_profile"
          in: "body"
          description: "Json description of the aggregation profile to be updated"
          required: true
          schema:
            $ref: '#/definitions/Aggregation_profile'
      responses:
        '201':
          description: Aggregation profile Updated
          schema:
            $ref: '#/definitions/Status'
        '400':
          description: Bad request due to malformed JSON in put body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    delete:
      summary: Delete an aggregation profile
      operationId: aggregationProfiles.Delete
      description: Delete a specific aggregation Profile which is targeted by it's unique id
      tags:
        - Aggregation Profiles
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the aggregation profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: Aggregation profile Deleted
          schema:
            $ref: '#/definitions/Status'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
  /aggregation_profiles:
    get:
      summary: List all aggregation profiles
      operationId: aggregationProfiles.List
      description: Aggregation Profiles provide a hiearchy structure of how different services are being aggregated during computations
      tags:
        - Aggregation Profiles
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list of aggregation profiles
          schema:
            $ref: '#/definitions/Aggregation_profile_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    post:
      summary: Create an aggregation profile
      operationId: aggregationProfiles.Create
      description: Create a new aggregation Profile
      tags:
        - Metric Profiles
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "aggregation_profile"
          in: "body"
          description: "Json description of the aggregation profile to be created"
          required: true
          schema:
            $ref: '#/definitions/Aggregation_profile'
      responses:
        '200':
          description: Aggregation profile Created
          schema:
            $ref: '#/definitions/Self_reference'
        '400':
          description: Bad request due to malformed JSON in post body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'


  /metric_profiles/{PROFILE_ID}:
    get:
      summary: List a specific metric profile
      operationId: metricProfiles.ListOne
      description: List one specific metric profile targeted by it's unique id
      tags:
        - Metric Profiles
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the metric profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list with one metric profile
          schema:
            $ref: '#/definitions/Metric_profile_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    put:
      summary: update a metric profile
      operationId: metricProfiles.Update
      description: update information on a specific metric Profile which is targeted by it's unique id
      tags:
        - Metric Profiles
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the metric profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "metric_profile"
          in: "body"
          description: "Json description of the metric profile to be updated"
          required: true
          schema:
            $ref: '#/definitions/Metric_profile'
      responses:
        '201':
          description: Metric profile Updated
          schema:
            $ref: '#/definitions/Status'
        '400':
          description: Bad request due to malformed JSON in put body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    delete:
      summary: Delete a metric profile
      operationId: metricProfiles.Delete
      description: Delete a specific metric Profile which is targeted by it's unique id
      tags:
        - Metric Profiles
      produces:
        - "application/json"
      parameters:
        - name: "PROFILE_ID"
          in: "path"
          description: "id of the metric profile"
          required: true
          type: string
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: Metric profile Deleted
          schema:
            $ref: '#/definitions/Status'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '404':
          description: Item not found
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
  /metric_profiles:
    get:
      summary: List all metric profiles
      operationId: metricProfiles.List
      description: Metric Profiles provide a list of relevant services/metrics to be accounted during a computation
      tags:
        - Metric Profiles
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
      responses:
        '200':
          description: A list of metric profiles
          schema:
            $ref: '#/definitions/Metric_profile_list'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'
    post:
      summary: Create a metric profile
      operationId: metricProfiles.Create
      description: Create a new metric Profile which includes a list of relevant services and metrics to be accounted during a computation
      tags:
        - Metric Profiles
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "x-api-key"
          in: "header"
          description: "the x-api-key"
          required: true
          type: "string"
        - name: "metric_profile"
          in: "body"
          description: "Json description of the metric profile to be created"
          required: true
          schema:
            $ref: '#/definitions/Metric_profile'
      responses:
        '200':
          description: Metric profile Created
          schema:
            $ref: '#/definitions/Self_reference'
        '400':
          description: Bad request due to malformed JSON in post body
          schema:
            $ref: '#/definitions/Status_error'
        '401':
          description: Unauthorized user
          schema:
            $ref: '#/definitions/Status_error'
        '406':
          description: Content Not acceptable
          schema:
            $ref: '#/definitions/Status_error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Status_error'

definitions:
  Status:
    type: object
    properties:
      message:
        type: string
      code:
        type: string

  Self_reference:
    type: object
    properties:
      status:
        $ref: '#/definitions/Status'
      data:
        type: object
        properties:
          id:
            type: string
          links:
            type: object
            properties:
              self:
                type: string

  Metric_profile_list:
    type: object
    properties:
      status:
       $ref: '#/definitions/Status'
      data:
        type: array
        items:
          $ref: '#/definitions/Metric_profile'

  Metric_profile:
    type: object
    properties:
      id:
        type: string
      services:
        type: array
        items:
          $ref: '#/definitions/Service'

  Service:
    type: object
    properties:
      name:
        type: string
      metrics:
        type: array
        items:
          type: string

  Status_error:
    type: object
    properties:
      message:
        type: string
      code:
        type: string
      details:
        type: string
      errors:
        type: array
        items:
          type: object
          properties:
            message:
              type: string
            code:
              type: string
            details:
              type: string

  Aggregation_profile_list:
    type: object
    properties:
      status:
       $ref: '#/definitions/Status'
      data:
        type: array
        items:
          $ref: '#/definitions/Aggregation_profile'

  Aggregation_profile:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      namespace:
        type: string
      endpoint_group:
        type: string
      metric_operation:
        type: string
      profile_operation:
        type: string
      metric_profile:
        type: object
        properties:
          name:
            type: string
          id:
            type: string
      groups:
        type: array
        items:
          $ref: '#/definitions/Service_group'

  Service_group:
    type: object
    properties:
      name:
        type: string
      operation:
        type: string
      services:
        type: array
        items:
           $ref: '#/definitions/Service_ops'

  Service_ops:
    type: object
    properties:
      name:
        type: string
      operation:
        type: string

  Operations_profile_list:
    type: object
    properties:
      status:
       $ref: '#/definitions/Status'
      data:
        type: array
        items:
          $ref: '#/definitions/Operations_profile'

  Operations_profile:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      available_states:
        type: array
        items:
          type: string
      defaults:
        type: object
        properties:
          down:
            type: string
          missing:
            type: string
          unknown:
            type: string
      operations:
        type: array
        items:
          $ref: '#/definitions/Operation'

  Operation:
    type: object
    properties:
      name:
        type: string
      truth_table:
        type: array
        items:
          $ref: '#/definitions/Truth_statement'

  Truth_statement:
    type: object
    properties:
      a:
        type: string
      b:
        type: string
      x:
        type: string

  Report_list:
    type: object
    properties:
      status:
       $ref: '#/definitions/Status'
      data:
        type: array
        items:
          $ref: '#/definitions/Report'

  Report:
    type: object
    properties:
      info:
        type: object
        properties:
          name:
            type: string
          description:
            type: string
          created:
            type: string
          updated:
            type: string
      topology_schema:
        type: object
        properties:
          group:
            type: object
            properties:
              type:
                type: string
              group:
                type: object
                properties:
                  type:
                    type: string
      profiles:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
            type:
              type: string
            name:
              type: string

      filter_tags:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
            value:
              type: string
