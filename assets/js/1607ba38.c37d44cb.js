"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6475],{3722:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var t=s(4848),i=s(8453);const o={id:"consistency",title:"API Data Consistency Check"},a=void 0,c={id:"consistency",title:"API Data Consistency Check",description:"Argo Monitoring uses automated checks that run at specific intervals and analyse the consistency of the monitorig data. If for example most of the monitored items appear to be problematic (flapping through states or appear as CRITICAL) that might indicate a network issue affecting Argo Monitoring. The automated checking mechanism will update the argo-web-api with the status of it's findings.There is also a manual mechanism where an argo-monitoring administrator can check the automated consistency warning and respond with an acknowledgement: either by maintaining the problematic state and confirming that there is an issue with the monitoring platform or - in the case that most of the monitoring items are truly experiecing issues idepedent from the state of the monitoring platform - revert the consistency warning and inform the users accordingly.",source:"@site/docs/consistency.md",sourceDirName:".",slug:"/consistency",permalink:"/argo-web-api/docs/consistency",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"consistency",title:"API Data Consistency Check"},sidebar:"tutorialSidebar",previous:{title:"Status Results (v3)",permalink:"/argo-web-api/docs/apiv3/v3_status_results"},next:{title:"API Health Information",permalink:"/argo-web-api/docs/health"}},r={},d=[{value:"GET Consistency information",id:"get-consistency-information",level:2},{value:"Request headers",id:"request-headers",level:3},{value:"Response",id:"response",level:3},{value:"Response Body",id:"response-body",level:3},{value:"GET Consistency information with verbosity",id:"get-consistency-information-with-verbosity",level:2},{value:"Request headers",id:"request-headers-1",level:3},{value:"Response",id:"response-1",level:3},{value:"Response Body",id:"response-body-1",level:3},{value:"POST Consistency results as automated check",id:"post-consistency-results-as-automated-check",level:2},{value:"Request headers",id:"request-headers-2",level:3},{value:"Post body",id:"post-body",level:3},{value:"Response",id:"response-2",level:3},{value:"POST Acknlowledgement of consistency issue",id:"post-acknlowledgement-of-consistency-issue",level:2},{value:"Request headers",id:"request-headers-3",level:3},{value:"Post body",id:"post-body-1",level:3},{value:"Response",id:"response-3",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Argo Monitoring uses automated checks that run at specific intervals and analyse the consistency of the monitorig data. If for example most of the monitored items appear to be problematic (flapping through states or appear as CRITICAL) that might indicate a network issue affecting Argo Monitoring. The automated checking mechanism will update the argo-web-api with the status of it's findings.There is also a manual mechanism where an argo-monitoring administrator can check the automated consistency warning and respond with an acknowledgement: either by maintaining the problematic state and confirming that there is an issue with the monitoring platform or - in the case that most of the monitoring items are truly experiecing issues idepedent from the state of the monitoring platform - revert the consistency warning and inform the users accordingly."}),"\n",(0,t.jsx)(n.h2,{id:"get-consistency-information",children:"GET Consistency information"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["note: consistency information is both accessible from ",(0,t.jsx)(n.code,{children:"/api/v2"})," and ",(0,t.jsx)(n.code,{children:"/api/v3"})," paths. In the examples we are going to maintin the ",(0,t.jsx)(n.code,{children:"/api/v3"})]})}),"\n",(0,t.jsx)(n.p,{children:"A user can get consistency information by issuing the following call:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /api/v3/consistency\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-headers",children:"Request headers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Accept: application/json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,t.jsxs)(n.p,{children:["Headers: ",(0,t.jsx)(n.code,{children:"Status: 200 OK"})]}),"\n",(0,t.jsx)(n.h3,{id:"response-body",children:"Response Body"}),"\n",(0,t.jsx)(n.p,{children:"Json Response example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "OK",\n  "timestamp": "2025-07-10T12:30:00Z",\n  "message": "Flapping items percentage 2% (2/100)"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"get-consistency-information-with-verbosity",children:"GET Consistency information with verbosity"}),"\n",(0,t.jsxs)(n.p,{children:["A user can get consistency information with more details (verbose) by using the url parameter ",(0,t.jsx)(n.code,{children:"?verbose"})," in the previous call:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /api/v3/consistency?verbose\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-headers-1",children:"Request headers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Accept: application/json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,t.jsxs)(n.p,{children:["Headers: ",(0,t.jsx)(n.code,{children:"Status: 200 OK"})]}),"\n",(0,t.jsx)(n.h3,{id:"response-body-1",children:"Response Body"}),"\n",(0,t.jsx)(n.p,{children:"User can be informed with details about the automated check (when did it run recently, it's status and it's message)"}),"\n",(0,t.jsx)(n.p,{children:"Json Response example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "CRITICAL",\n  "timestamp": "2025-07-10T05:44:00Z",\n  "message": "Flapping items percentage 65% (65/100)",\n  "auto_check_status": "CRITICAL",\n  "auto_check_message": "Flapping items percentage 65% (65/100)",\n  "auto_check_timestamp": "2025-07-10T02:30:00Z",\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"If there is an admin acknowledgement the user can be informed about it also (in verbose mode)"}),"\n",(0,t.jsx)(n.p,{children:"Json Response example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "OK",\n  "timestamp": "2025-07-10T12:44:00Z",\n  "message": "Monitoring is ok - most items are flapping due to issues of their own",\n  "auto_check_status": "CRITICAL",\n  "auto_check_message": "Flapping items percentage 65% (65/100)",\n  "auto_check_timestamp": "2025-07-10T12:30:00Z",\n  "ack_check_status": "OK",\n  "ack_check_message": "Monitoring is ok - most items are flapping due to issues of their own",\n  "ack_check_timestamp": "2025-07-10T06:30:00Z",\n  "ack_timeout_hours":6\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"So with verbose mode the user can have fully awareness of the consistency status and how it is affected both by the automated check and from the admin acknowledgements."}),"\n",(0,t.jsx)(n.h2,{id:"post-consistency-results-as-automated-check",children:"POST Consistency results as automated check"}),"\n",(0,t.jsxs)(n.p,{children:["An automated consistency check can post results by having the correct token (with the correct role of ",(0,t.jsx)(n.code,{children:"consistency-check"}),") and by issuing the following request:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST /api/v3/consistency/auto-check\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-headers-2",children:"Request headers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Accept: application/json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"post-body",children:"Post body"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "status": "OK",\n    "message": "All items are ok"\n}\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"response-2",children:"Response"}),"\n",(0,t.jsxs)(n.p,{children:["The automated check needs only to specify a state (",(0,t.jsx)(n.code,{children:"OK"}),", ",(0,t.jsx)(n.code,{children:"CRITICAL"}),") and an accompanying message. If the request is succesfull the web-api will respond:"]}),"\n",(0,t.jsx)(n.p,{children:"Json Response:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "message": "The Auto Check event was posted succesfully",\n  "code": 200\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"post-acknlowledgement-of-consistency-issue",children:"POST Acknlowledgement of consistency issue"}),"\n",(0,t.jsxs)(n.p,{children:["An user with the correct role (",(0,t.jsx)(n.code,{children:"consistency-ack"}),") can acknowledge consistency issues raised by the automated mechanism and respond accordingly by issuing the following request:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST /api/v3/consistency/ack\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-headers-3",children:"Request headers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Accept: application/json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"post-body-1",children:"Post body"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "status": "OK",\n    "message": "False alarm! Monitoring platform is ok"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Optionally the user can specify an ack timeout in hours (default: ",(0,t.jsx)(n.code,{children:"6"}),") as such:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "status": "OK",\n    "message": "False alarm! Monitoring platform is ok",\n    "timeout_hours": 2\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"response-3",children:"Response"}),"\n",(0,t.jsx)(n.p,{children:"If the request is succesfull the web-api will respond:"}),"\n",(0,t.jsx)(n.p,{children:"Json Response:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "message": "The Ack event was posted succesfully",\n  "code": 200\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var t=s(6540);const i={},o=t.createContext(i);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);